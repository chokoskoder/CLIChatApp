//all the websocket logic comes here